import { getArgument, saveBitAsByte } from '../scriptUtils';

describe('Test scriptUtils.ts', () => {
  describe('Test saveBitAsByte', () => {
    it.each`
      hex       | result
      ${''}     | ${''}
      ${'00'}   | ${'0000000000000000'}
      ${'01'}   | ${'0000000000000001'}
      ${'10'}   | ${'0000000100000000'}
      ${'11'}   | ${'0000000100000001'}
      ${'0f'}   | ${'0000000001010101'}
      ${'f0'}   | ${'0101010100000000'}
      ${'ff'}   | ${'0101010101010101'}
      ${'00ff'} | ${'00000000000000000101010101010101'}
      ${'01ff'} | ${'00000000000000010101010101010101'}
      ${'02ff'} | ${'00000000000001000101010101010101'}
      ${'04ff'} | ${'00000000000100000101010101010101'}
      ${'08ff'} | ${'00000000010000000101010101010101'}
      ${'08ff'} | ${'00000000010000000101010101010101'}
      ${'0'}    | ${'0000000000000000'}
      ${'1'}    | ${'0000000000000001'}
      ${'2'}    | ${'0000000000000100'}
      ${'3'}    | ${'0000000000000101'}
      ${'e'}    | ${'0000000001010100'}
      ${'f'}    | ${'0000000001010101'}
    `('reslut="$result" if hex="$hex"', ({ hex, result }) => {
      expect(saveBitAsByte(hex)).toBe(result);
    });
  });

  it('Test getArgument', () => {
    const addressIndex = 0;

    expect(
      getArgument(
        {
          receiver: 'EQAW5QLk3XvW3HMbLqkE9wXkL9NdGpE1555tUxhdea8pVIbJ',
          amount: '123000000',
          seqno: 20,
          payload: 'Hello CoolWallet!',
          expireAt: 1716886177,
        },
        addressIndex
      )
    ).toBe(
      '0D108000002c8000025f800000000000001466559aa1010000010000010001000000010001010001010100000100010000000000000100010101000001000001010001010100010001010101000101010100010001010001010001010100000001010100000101000000010100010100000100010101000100010001000001000000000001000001010101000101010000000000010001010101000001000000000100010101010101000100000101000100010101000100000001010001000100000100000001000001010001000101010100000101010100000101010100000101000101000100010001000001010000000101000000000100010101000100010101010000010100010001010101000001000100000100010001000100000001000000000000000101010001000100010000010100010001000001010000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000a80000000000000000000000000000000000000000000000000000000000000000000100000100000000010100000100010001010001010000000101000101000000010100010101010000010000000000000100000000010100010100010101010001010001010101000101000101000000010001000101010001010000000001000101000101000000010100010100000001010000010001000101010001000000000100000000010000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000'
    );
  });
});
